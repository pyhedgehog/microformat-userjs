var show_json = {
  //baseURL:"http://jsbin.com/ligusi/#",
  baseURL:"data:text/html;base64,PCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPkpTT04gdmlld2VyPC90aXRsZT48c2NyaXB0PnZhciBwcmV0dHlQcmludD0oZnVuY3Rpb24oKXt2YXIgYj17ZWw6ZnVuY3Rpb24oZixkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGYpLGM7ZD1iLm1lcmdlKHt9LGQpO2lmKGQmJmQuc3R5bGUpe3ZhciBnPWQuc3R5bGU7Yi5hcHBseUNTUyhlLGQuc3R5bGUpO2RlbGV0ZSBkLnN0eWxlfWZvcihjIGluIGQpe2lmKGQuaGFzT3duUHJvcGVydHkoYykpe2VbY109ZFtjXX19cmV0dXJuIGV9LGFwcGx5Q1NTOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBnIGluIGQpe2lmKGQuaGFzT3duUHJvcGVydHkoZykpe3RyeXtjLnN0eWxlW2ddPWRbZ119Y2F0Y2goZil7fX19fSx0eHQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGMpfSxyb3c6ZnVuY3Rpb24oZSxmLGMpe2M9Y3x8InRkIjt2YXIgaD1iLmNvdW50KGUsbnVsbCkrMSxnPWIuZWwoInRyIiksaSxkPXtzdHlsZTpiLmdldFN0eWxlcyhjLGYpLGNvbFNwYW46aCxvbm1vdXNlb3ZlcjpmdW5jdGlvbigpe3ZhciBqPXRoaXMucGFyZW50Tm9kZS5jaGlsZE5vZGVzO2IuZm9yRWFjaChqLGZ1bmN0aW9uKGspe2lmKGsubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJ0ZCIpe3JldHVybn1iLmFwcGx5Q1NTKGssYi5nZXRTdHlsZXMoInRkX2hvdmVyIixmKSl9KX0sb25tb3VzZW91dDpmdW5jdGlvbigpe3ZhciBqPXRoaXMucGFyZW50Tm9kZS5jaGlsZE5vZGVzO2IuZm9yRWFjaChqLGZ1bmN0aW9uKGspe2lmKGsubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJ0ZCIpe3JldHVybn1iLmFwcGx5Q1NTKGssYi5nZXRTdHlsZXMoInRkIixmKSl9KX19O2IuZm9yRWFjaChlLGZ1bmN0aW9uKGope2lmKGo9PT1udWxsKXtyZXR1cm59aT1iLmVsKGMsZCk7aWYoai5ub2RlVHlwZSl7aS5hcHBlbmRDaGlsZChqKX1lbHNle2kuaW5uZXJIVE1MPWIuc2hvcnRlbihqLnRvU3RyaW5nKCkpfWcuYXBwZW5kQ2hpbGQoaSl9KTtyZXR1cm4gZ30saFJvdzpmdW5jdGlvbihjLGQpe3JldHVybiBiLnJvdyhjLGQsInRoIil9LHRhYmxlOmZ1bmN0aW9uKGgsZSl7aD1ofHxbXTt2YXIgZD17dGhlYWQ6e3N0eWxlOmIuZ2V0U3R5bGVzKCJ0aGVhZCIsZSl9LHRib2R5OntzdHlsZTpiLmdldFN0eWxlcygidGJvZHkiLGUpfSx0YWJsZTp7c3R5bGU6Yi5nZXRTdHlsZXMoInRhYmxlIixlKX19LGc9Yi5lbCgidGFibGUiLGQudGFibGUpLGY9Yi5lbCgidGhlYWQiLGQudGhlYWQpLGM9Yi5lbCgidGJvZHkiLGQudGJvZHkpO2lmKGgubGVuZ3RoKXtnLmFwcGVuZENoaWxkKGYpO2YuYXBwZW5kQ2hpbGQoYi5oUm93KGgsZSkpfWcuYXBwZW5kQ2hpbGQoYyk7cmV0dXJue25vZGU6Zyx0Ym9keTpjLHRoZWFkOmYsYXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oaSl7dGhpcy50Ym9keS5hcHBlbmRDaGlsZChpKX0sYWRkUm93OmZ1bmN0aW9uKGssaixpKXt0aGlzLmFwcGVuZENoaWxkKGIucm93LmNhbGwoYixrLChqfHxlKSxpKSk7cmV0dXJuIHRoaXN9fX0sc2hvcnRlbjpmdW5jdGl"+
                                "vbihkKXt2YXIgYz04MDtkPWQucmVwbGFjZSgvXlxzXHMqfFxzXHMqJHxcbi9nLCIiKTtyZXR1cm4gZC5sZW5ndGg+Yz8oZC5zdWJzdHJpbmcoMCxjLTEpKyIuLi4iKTpkfSxodG1sZW50aXRpZXM6ZnVuY3Rpb24oYyl7cmV0dXJuIGMucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpfSxtZXJnZTpmdW5jdGlvbihoLGcpe2lmKHR5cGVvZiBoIT09Im9iamVjdCIpe2g9e319Zm9yKHZhciBmIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkoZikpe3ZhciBjPWdbZl07aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7aFtmXT1iLm1lcmdlKGhbZl0sYyk7Y29udGludWV9aFtmXT1jfX1mb3IodmFyIGU9MixkPWFyZ3VtZW50cy5sZW5ndGg7ZTxkO2UrKyl7Yi5tZXJnZShoLGFyZ3VtZW50c1tlXSl9cmV0dXJuIGh9LGNvdW50OmZ1bmN0aW9uKGMsZyl7dmFyIGY9MDtmb3IodmFyIGU9MCxkPWMubGVuZ3RoO2U8ZDtlKyspe2lmKGNbZV09PT1nKXtmKyt9fXJldHVybiBmfSx0aGVhZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGhlYWQiKVswXX0sZm9yRWFjaDpmdW5jdGlvbihlLGQsZyl7aWYoIWcpe2c9ZH12YXIgYz1lLmxlbmd0aCxmPS0xO3doaWxlKCsrZjxjKXtpZihnKGVbZl0sZixlKT09PWZhbHNlKXticmVha319cmV0dXJuIHRydWV9LHR5cGU6ZnVuY3Rpb24oYyl7dHJ5e2lmKGM9PT1udWxsKXtyZXR1cm4ibnVsbCJ9aWYoYz09PXVuZGVmaW5lZCl7cmV0dXJuInVuZGVmaW5lZCJ9dmFyIGY9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpLm1hdGNoKC9ccyguKz8pXF0vKVsxXS50b0xvd2VyQ2FzZSgpO2lmKGMubm9kZVR5cGUpe2lmKGMubm9kZVR5cGU9PT0xKXtyZXR1cm4iZG9tZWxlbWVudCJ9cmV0dXJuImRvbW5vZGUifWlmKC9eKHN0cmluZ3xudW1iZXJ8YXJyYXl8cmVnZXhwfGZ1bmN0aW9ufGRhdGV8Ym9vbGVhbikkLy50ZXN0KGYpKXtyZXR1cm4gZn1pZih0eXBlb2YgYz09PSJvYmplY3QiKXtyZXR1cm4gYy5qcXVlcnkmJnR5cGVvZiBjLmpxdWVyeT09PSJzdHJpbmciPyJqcXVlcnkiOiJvYmplY3QifWlmKGM9PT13aW5kb3d8fGM9PT1kb2N1bWVudCl7cmV0dXJuIm9iamVjdCJ9cmV0dXJuImRlZmF1bHQifWNhdGNoKGQpe3JldHVybiJkZWZhdWx0In19LHdpdGhpbjpmdW5jdGlvbihjKXtyZXR1cm57aXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciBkIGluIGMpe2lmKGNbZF09PT1lKXtyZXR1cm4gZH19cmV0dXJuIiJ9fX0sY29tbW9uOntjaXJjUmVmOmZ1bmN0aW9uKGUsYyxkKXtyZXR1cm4gYi5leHBhbmRlcigiW1BPSU5UUyBCQUNLIFRPIDxzdHJvbmc+IisoYykrIjwvc3Ryb25nPl0iLCJDbGljayB0byBzaG93IHRoaXMgaXRlbSBhbnl3YXkiLGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGEoZSx7bWF4RGVwdGg6MX0pKX0pfSxkZXB0aFJlYWNoZWQ6ZnVuY3Rpb24oZCxjKXtyZXR1cm4gYi5leHBhbmRlcigiW0RFUFRIIFJFQUNIRURdIiwiQ2xpY2sgdG8gc2hvdyB0aGlzIG"+
                                "l0ZW0gYW55d2F5IixmdW5jdGlvbigpe3RyeXt0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoYShkLHttYXhEZXB0aDoxfSkpfWNhdGNoKGYpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChiLnRhYmxlKFsiRVJST1IgT0NDVVJFRCBEVVJJTkcgT0JKRUNUIFJFVFJJRVZBTCJdLCJlcnJvciIpLmFkZFJvdyhbZi5tZXNzYWdlXSkubm9kZSl9fSl9fSxnZXRTdHlsZXM6ZnVuY3Rpb24oZCxjKXtjPWEuc2V0dGluZ3Muc3R5bGVzW2NdfHx7fTtyZXR1cm4gYi5tZXJnZSh7fSxhLnNldHRpbmdzLnN0eWxlc1siZGVmYXVsdCJdW2RdLGNbZF0pfSxleHBhbmRlcjpmdW5jdGlvbihlLGQsYyl7cmV0dXJuIGIuZWwoImEiLHtpbm5lckhUTUw6Yi5zaG9ydGVuKGUpKycgPGIgc3R5bGU9InZpc2liaWxpdHk6aGlkZGVuOyI+WytdPC9iPicsdGl0bGU6ZCxvbm1vdXNlb3ZlcjpmdW5jdGlvbigpe3RoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImIiKVswXS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIn0sb25tb3VzZW91dDpmdW5jdGlvbigpe3RoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImIiKVswXS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4ifSxvbmNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PSJub25lIjtjLmNhbGwodGhpcyk7cmV0dXJuIGZhbHNlfSxzdHlsZTp7Y3Vyc29yOiJwb2ludGVyIn19KX0sc3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3ZhciBkPWIudHlwZShlKSxnLGY9dHJ1ZTtpZihkPT09ImFycmF5Iil7Zz0iWyI7Yi5mb3JFYWNoKGUsZnVuY3Rpb24oaixoKXtnKz0oaD09PTA/IiI6IiwgIikrYi5zdHJpbmdpZnkoail9KTtyZXR1cm4gZysiXSJ9aWYodHlwZW9mIGU9PT0ib2JqZWN0Iil7Zz0ieyI7Zm9yKHZhciBjIGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkoYykpe2crPShmPyIiOiIsICIpK2MrIjoiK2Iuc3RyaW5naWZ5KGVbY10pO2Y9ZmFsc2V9fXJldHVybiBnKyJ9In1pZihkPT09InJlZ2V4cCIpe3JldHVybiIvIitlLnNvdXJjZSsiLyJ9aWYoZD09PSJzdHJpbmciKXtyZXR1cm4nIicrZS5yZXBsYWNlKC8iL2csJ1xcIicpKyciJ31yZXR1cm4gZS50b1N0cmluZygpfSxoZWFkZXJHcmFkaWVudDooZnVuY3Rpb24oKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtpZighZC5nZXRDb250ZXh0KXtyZXR1cm4iIn12YXIgYz1kLmdldENvbnRleHQoIjJkIik7ZC5oZWlnaHQ9MzA7ZC53aWR0aD0xO3ZhciBmPWMuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLDAsMzApO2YuYWRkQ29sb3JTdG9wKDAsInJnYmEoMCwwLDAsMCkiKTtmLmFkZENvbG9yU3RvcCgxLCJyZ2JhKDAsMCwwLDAuMjUpIik7Yy5maWxsU3R5bGU9ZjtjLmZpbGxSZWN0KDAsMCwxLDMwKTt2YXIgZT1kLnRvRGF0YVVSTCYmZC50b0RhdGFVUkwoKTtyZXR1cm4idXJsKCIrKGV8fCIiKSsiKSJ9KSgpfTt2YXIgYT1mdW5jdGlvbihnLGspe2s9a3x8e307dmFyIGY9Yi5tZXJnZSh7fSxhLmNvbmZpZyxrKSxjPWIuZWwoImRpdiIpLGQ9YS5jb25maWcsaD0wLGk9e30sZT1mYWxzZTthLnNldHRpb"+
                                "mdzPWY7dmFyIGo9e3N0cmluZzpmdW5jdGlvbihsKXtyZXR1cm4gYi50eHQoJyInK2Iuc2hvcnRlbihsLnJlcGxhY2UoLyIvZywnXFwiJykpKyciJyl9LG51bWJlcjpmdW5jdGlvbihsKXtyZXR1cm4gYi50eHQobCl9LHJlZ2V4cDpmdW5jdGlvbihuKXt2YXIgbz1iLnRhYmxlKFsiUmVnRXhwIixudWxsXSwicmVnZXhwIik7dmFyIGw9Yi50YWJsZSgpO3ZhciBtPWIuZXhwYW5kZXIoIi8iK24uc291cmNlKyIvIiwiQ2xpY2sgdG8gc2hvdyBtb3JlIixmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChvLm5vZGUpfSk7bC5hZGRSb3coWyJnIixuLmdsb2JhbF0pLmFkZFJvdyhbImkiLG4uaWdub3JlQ2FzZV0pLmFkZFJvdyhbIm0iLG4ubXVsdGlsaW5lXSk7by5hZGRSb3coWyJzb3VyY2UiLCIvIituLnNvdXJjZSsiLyJdKS5hZGRSb3coWyJmbGFncyIsbC5ub2RlXSkuYWRkUm93KFsibGFzdEluZGV4IixuLmxhc3RJbmRleF0pO3JldHVybiBmLmV4cGFuZGVkP28ubm9kZTptfSxkb21lbGVtZW50OmZ1bmN0aW9uKG0scCl7dmFyIG89Yi50YWJsZShbIkRPTUVsZW1lbnQiLG51bGxdLCJkb21lbGVtZW50Iiksbj1bImlkIiwiY2xhc3NOYW1lIiwiaW5uZXJIVE1MIiwic3JjIiwiaHJlZiJdLGw9bS5ub2RlTmFtZXx8IiI7by5hZGRSb3coWyJ0YWciLCImbHQ7IitsLnRvTG93ZXJDYXNlKCkrIiZndDsiXSk7Yi5mb3JFYWNoKG4sZnVuY3Rpb24ocSl7aWYobVtxXSl7by5hZGRSb3coW3EsYi5odG1sZW50aXRpZXMobVtxXSldKX19KTtyZXR1cm4gZi5leHBhbmRlZD9vLm5vZGU6Yi5leHBhbmRlcigiRE9NRWxlbWVudCAoIitsLnRvTG93ZXJDYXNlKCkrIikiLCJDbGljayB0byBzaG93IG1vcmUiLGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG8ubm9kZSl9KX0sZG9tbm9kZTpmdW5jdGlvbihsKXt2YXIgbj1iLnRhYmxlKFsiRE9NTm9kZSIsbnVsbF0sImRvbWVsZW1lbnQiKSxtPWIuaHRtbGVudGl0aWVzKChsLmRhdGF8fCJVTkRFRklORUQiKS5yZXBsYWNlKC9cbi9nLCJcXG4iKSk7bi5hZGRSb3coWyJub2RlVHlwZSIsbC5ub2RlVHlwZSsiICgiK2wubm9kZU5hbWUrIikiXSkuYWRkUm93KFsiZGF0YSIsbV0pO3JldHVybiBmLmV4cGFuZGVkP24ubm9kZTpiLmV4cGFuZGVyKCJET01Ob2RlIiwiQ2xpY2sgdG8gc2hvdyBtb3JlIixmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChuLm5vZGUpfSl9LGpxdWVyeTpmdW5jdGlvbihtLG4sbCl7cmV0dXJuIGouYXJyYXkobSxuLGwsdHJ1ZSl9LG9iamVjdDpmdW5jdGlvbihvLG0sdCl7dmFyIGw9Yi53aXRoaW4oaSkuaXMobyk7aWYobCl7cmV0dXJuIGIuY29tbW9uLmNpcmNSZWYobyxsLGYpfWlbdHx8IlRPUCJdPW87aWYobT09PWYubWF4RGVwdGgpe3JldHVybiBiLmNvbW1vbi5kZXB0aFJlYWNoZWQobyxmKX12YXIgdT1iLnRhYmxlKFsiT2JqZWN0IixudWxsXSwib2JqZWN0Iiksbj10cnVlO2Zvcih2YXIgcCBpbiBvKXtpZighby5oYXNPd25Qcm9wZXJ0eXx8by5oYXNPd25Qcm9wZXJ0eShwKSl7dmFyIHY9b1tw"+
                                "XSxzPWIudHlwZSh2KTtuPWZhbHNlO3RyeXt1LmFkZFJvdyhbcCxqW3NdKHYsbSsxLHApXSxzKX1jYXRjaChyKXtpZih3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nKXtjb25zb2xlLmxvZyhyLm1lc3NhZ2UpfX19fWlmKG4pe3UuYWRkUm93KFsiPHNtYWxsPltlbXB0eV08L3NtYWxsPiJdKX1lbHNle3UudGhlYWQuYXBwZW5kQ2hpbGQoYi5oUm93KFsia2V5IiwidmFsdWUiXSwiY29sSGVhZGVyIikpfXZhciBxPShmLmV4cGFuZGVkfHxlKT91Lm5vZGU6Yi5leHBhbmRlcihiLnN0cmluZ2lmeShvKSwiQ2xpY2sgdG8gc2hvdyBtb3JlIixmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh1Lm5vZGUpfSk7ZT10cnVlO3JldHVybiBxfSxhcnJheTpmdW5jdGlvbihwLG4scyxsKXt2YXIgbT1iLndpdGhpbihpKS5pcyhwKTtpZihtKXtyZXR1cm4gYi5jb21tb24uY2lyY1JlZihwLG0pfWlbc3x8IlRPUCJdPXA7aWYobj09PWYubWF4RGVwdGgpe3JldHVybiBiLmNvbW1vbi5kZXB0aFJlYWNoZWQocCl9dmFyIHI9bD8ialF1ZXJ5IjoiQXJyYXkiLHQ9Yi50YWJsZShbcisiKCIrcC5sZW5ndGgrIikiLG51bGxdLGw/ImpxdWVyeSI6ci50b0xvd2VyQ2FzZSgpKSxvPXRydWUscT0wO2lmKGwpe3QuYWRkUm93KFsic2VsZWN0b3IiLHAuc2VsZWN0b3JdKX1iLmZvckVhY2gocCxmdW5jdGlvbih2LHUpe2lmKGYubWF4QXJyYXk+PTAmJisrcT5mLm1heEFycmF5KXt0LmFkZFJvdyhbdSsiLi4iKyhwLmxlbmd0aC0xKSxqW2IudHlwZSh2KV0oIi4uLiIsbisxLHUpXSk7cmV0dXJuIGZhbHNlfW89ZmFsc2U7dC5hZGRSb3coW3UsaltiLnR5cGUodildKHYsbisxLHUpXSl9KTtpZighbCl7aWYobyl7dC5hZGRSb3coWyI8c21hbGw+W2VtcHR5XTwvc21hbGw+Il0pfWVsc2V7dC50aGVhZC5hcHBlbmRDaGlsZChiLmhSb3coWyJpbmRleCIsInZhbHVlIl0sImNvbEhlYWRlciIpKX19cmV0dXJuIGYuZXhwYW5kZWQ/dC5ub2RlOmIuZXhwYW5kZXIoYi5zdHJpbmdpZnkocCksIkNsaWNrIHRvIHNob3cgbW9yZSIsZnVuY3Rpb24oKXt0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodC5ub2RlKX0pfSwiZnVuY3Rpb24iOmZ1bmN0aW9uKHEscyxvKXt2YXIgbT1iLndpdGhpbihpKS5pcyhxKTtpZihtKXtyZXR1cm4gYi5jb21tb24uY2lyY1JlZihxLG0pfWlbb3x8IlRPUCJdPXE7dmFyIHI9Yi50YWJsZShbIkZ1bmN0aW9uIixudWxsXSwiZnVuY3Rpb24iKSxwPWIudGFibGUoWyJBcmd1bWVudHMiXSksbj1xLnRvU3RyaW5nKCkubWF0Y2goL1woKC4rPylcKS8pLGw9cS50b1N0cmluZygpLm1hdGNoKC9cKC4qP1wpXHMrP1x7PyhbXFNcc10rKS8pWzFdLnJlcGxhY2UoL1x9PyQvLCIiKTtyLmFkZFJvdyhbImFyZ3VtZW50cyIsbj9uWzFdLnJlcGxhY2UoL1teXHdfLFxzXS9nLCIiKToiPHNtYWxsPltub25lL25hdGl2ZV08L3NtYWxsPiJdKS5hZGRSb3coWyJib2R5IixsXSk7cmV0dXJuIGYuZXhwYW5kZWQ/ci5ub2RlOmIuZXhwYW5kZXIoImZ1bmN0aW9uKCl7Li4ufSIsIkNsaWNrIHRvIHNlZSBtb3JlIGFib3V"+
                                "0IHRoaXMgZnVuY3Rpb24uIixmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChyLm5vZGUpfSl9LGRhdGU6ZnVuY3Rpb24obCl7dmFyIG09Yi50YWJsZShbIkRhdGUiLG51bGxdLCJkYXRlIiksbj1sLnRvU3RyaW5nKCkuc3BsaXQoL1xzLyk7bS5hZGRSb3coWyJUaW1lIixuWzRdXSkuYWRkUm93KFsiRGF0ZSIsbi5zbGljZSgwLDQpLmpvaW4oIi0iKV0pO3JldHVybiBmLmV4cGFuZGVkP20ubm9kZTpiLmV4cGFuZGVyKCJEYXRlICh0aW1lc3RhbXApOiAiKygrbCksIkNsaWNrIHRvIHNlZSBhIGxpdHRsZSBtb3JlIGluZm8gYWJvdXQgdGhpcyBkYXRlIixmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChtLm5vZGUpfSl9LCJib29sZWFuIjpmdW5jdGlvbihsKXtyZXR1cm4gYi50eHQobC50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkpfSwidW5kZWZpbmVkIjpmdW5jdGlvbigpe3JldHVybiBiLnR4dCgiVU5ERUZJTkVEIil9LCJudWxsIjpmdW5jdGlvbigpe3JldHVybiBiLnR4dCgiTlVMTCIpfSwiZGVmYXVsdCI6ZnVuY3Rpb24oKXtyZXR1cm4gYi50eHQoInByZXR0eVByaW50OiBUeXBlTm90Rm91bmQgRXJyb3IiKX19O2MuYXBwZW5kQ2hpbGQoalsoZi5mb3JjZU9iamVjdCk/Im9iamVjdCI6Yi50eXBlKGcpXShnLGgpKTtyZXR1cm4gY307YS5jb25maWc9e2V4cGFuZGVkOnRydWUsZm9yY2VPYmplY3Q6ZmFsc2UsbWF4RGVwdGg6MyxtYXhBcnJheTotMSxzdHlsZXM6e2FycmF5Ont0aDp7YmFja2dyb3VuZENvbG9yOiIjNkRCRDJBIixjb2xvcjoid2hpdGUifX0sImZ1bmN0aW9uIjp7dGg6e2JhY2tncm91bmRDb2xvcjoiI0Q4MjUyNSJ9fSxyZWdleHA6e3RoOntiYWNrZ3JvdW5kQ29sb3I6IiNFMkYzRkIiLGNvbG9yOiIjMDAwIn19LG9iamVjdDp7dGg6e2JhY2tncm91bmRDb2xvcjoiIzFGOTZDRiJ9fSxqcXVlcnk6e3RoOntiYWNrZ3JvdW5kQ29sb3I6IiNGQkYzMTUifX0sZXJyb3I6e3RoOntiYWNrZ3JvdW5kQ29sb3I6InJlZCIsY29sb3I6InllbGxvdyJ9fSxkb21lbGVtZW50Ont0aDp7YmFja2dyb3VuZENvbG9yOiIjRjM4MDFFIn19LGRhdGU6e3RoOntiYWNrZ3JvdW5kQ29sb3I6IiNBNzI1RDgifX0sY29sSGVhZGVyOnt0aDp7YmFja2dyb3VuZENvbG9yOiIjRUVFIixjb2xvcjoiIzAwMCIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIn19LCJkZWZhdWx0Ijp7dGFibGU6e2JvcmRlckNvbGxhcHNlOiJjb2xsYXBzZSIsd2lkdGg6IjEwMCUifSx0ZDp7cGFkZGluZzoiNXB4Iixmb250U2l6ZToiMTJweCIsYmFja2dyb3VuZENvbG9yOiIjRkZGIixjb2xvcjoiIzIyMiIsYm9yZGVyOiIxcHggc29saWQgIzAwMCIsdmVydGljYWxBbGlnbjoidG9wIixmb250RmFtaWx5OiciQ29uc29sYXMiLCJMdWNpZGEgQ29uc29sZSIsQ291cmllcixtb25vJyx3aGl0ZVNwYWNlOiJub3dyYXAifSx0ZF9ob3Zlcjp7fSx0aDp7cGFkZGluZzoiNXB4Iixmb250U2l6ZToiMTJweCIsYmFja2dyb3VuZENvbG9yOiIjMjIyIixjb2xvcjoiI0VFRSIsdGV4dEFsaWduOiJsZWZ0Iixib3JkZXI6Ij"+
                                "FweCBzb2xpZCAjMDAwIix2ZXJ0aWNhbEFsaWduOiJ0b3AiLGZvbnRGYW1pbHk6JyJDb25zb2xhcyIsIkx1Y2lkYSBDb25zb2xlIixDb3VyaWVyLG1vbm8nLGJhY2tncm91bmRJbWFnZTpiLmhlYWRlckdyYWRpZW50LGJhY2tncm91bmRSZXBlYXQ6InJlcGVhdC14In19fX07cmV0dXJuIGF9KSgpOzwvc2NyaXB0PjxzdHlsZT4uZXJyb3J7Y29sb3I6cmVkfXByZXtvdXRsaW5lOjFweCBzb2xpZCAjY2NjO3BhZGRpbmc6NXB4O21hcmdpbjo1cHh9LnN0cmluZ3tjb2xvcjpncmVlbn0ubnVtYmVye2NvbG9yOmRhcmtvcmFuZ2V9LmJvb2xlYW57Y29sb3I6Ymx1ZX0ubnVsbHtjb2xvcjptYWdlbnRhfS5rZXl7Y29sb3I6cmVkfTwvc3R5bGU+PC9oZWFkPjxib2R5PjxzY3JpcHQ+KGZ1bmN0aW9uKGIpe2lmKCJvbmhhc2hjaGFuZ2UiIGluIGIuZG9jdW1lbnQuYm9keSl7cmV0dXJufXZhciBhPWIubG9jYXRpb24sYz1hLmhyZWYsZD1hLmhhc2g7c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZj1hLmhyZWYsZT1hLmhhc2g7aWYoZSE9ZCYmdHlwZW9mIGIub25oYXNoY2hhbmdlPT09ImZ1bmN0aW9uIil7Yi5vbmhhc2hjaGFuZ2Uoe3R5cGU6Imhhc2hjaGFuZ2UiLG9sZFVSTDpjLG5ld1VSTDpmfSk7Yz1mO2Q9ZX19LDEwMCl9KSh3aW5kb3cpO3ZhciBzdHIsb2JqLGVycjtmdW5jdGlvbiBwYXJzZV9hcmdfc3RyKGEpe2Vycj11bmRlZmluZWQ7b2JqPXVuZGVmaW5lZDt0cnl7aWYoYS5zdGFydHNXaXRoKCIjIikpe2E9ZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZSh3aW5kb3cuYXRvYihhLnN1YnN0cigxKSkpKX1pZihhLnN0YXJ0c1dpdGgoIlsiKXx8YS5zdGFydHNXaXRoKCJ7Iikpe3N0cj1hO29iaj1KU09OLnBhcnNlKHN0cik7cmV0dXJuIHRydWV9ZXJyPSJVbmtub3duIHN0cmluZyBzdGFydDogIithLnN1YnN0cigwLDIwKTtyZXR1cm4gZmFsc2V9Y2F0Y2goYil7ZXJyPWJ9fWZ1bmN0aW9uIHNob3dfc3RyKGMpe2lmKHR5cGVvZiBvYmo9PSJ1bmRlZmluZWQiKXtkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwiPHA+IitjKyIgPSAiK3N0cisiPC9wPiIpfWVsc2V7dmFyIGI9cHJldHR5UHJpbnQob2JqLHttYXhEZXB0aDo2fSk7dmFyIGE9ZG9jdW1lbnQuZXZhbHVhdGUoInRhYmxlWzFdL3RoZWFkWzFdL3RyWzFdL3RoWzFdIixiLG51bGwsWFBhdGhSZXN1bHQuRklSU1RfT1JERVJFRF9OT0RFX1RZUEUsbnVsbCkuc2luZ2xlTm9kZVZhbHVlO2lmKGEpe2EudGV4dENvbnRlbnQ9YysiICgiK2EudGV4dENvbnRlbnQrIikifWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYil9fWZ1bmN0aW9uIHNob3dfZXJyKCl7aWYodHlwZW9mIGVycj09InVuZGVmaW5lZCIpe3JldHVybn1kb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwnPHAgY2xhc3M9ImVycm9yIj4nK2VycisiPC9wPiIpfWZ1bmN0aW9uIHBhcnNlX3NlYXJjaCgpe2lmKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCl7aWYocGFyc2VfYXJnX3N0cihkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQubG9jY"+
                                "XRpb24uc2VhcmNoLnN1YnN0cigxKSkpKXtzaG93X3N0cigic2VhcmNoIil9c2hvd19lcnIoKX19ZnVuY3Rpb24gcGFyc2VfaGFzaCgpe2lmKGRvY3VtZW50LmxvY2F0aW9uLmhhc2gpe2lmKHBhcnNlX2FyZ19zdHIoZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zdWJzdHIoMSkpKXtzaG93X3N0cigiaGFzaCIpfXNob3dfZXJyKCl9fWZ1bmN0aW9uIG9uX2hhc2hfY2hhbmdlKCl7aWYoZG9jdW1lbnQubG9jYXRpb24uaGFzaCl7cGFyc2VfaGFzaCgpfWVsc2V7cGFyc2Vfc2VhcmNoKCl9fXBhcnNlX3NlYXJjaCgpO3BhcnNlX2hhc2goKTt3aW5kb3cub25oYXNoY2hhbmdlPW9uX2hhc2hfY2hhbmdlOzwvc2NyaXB0PjwvYm9keT48L2h0bWw+#",
  description: "Show JSON",
  descriptionAll: "Show JSON",
  shortDescription: "Show JSON",
  shortDescriptionAll: "Show JSON",
  icon: "http://icongal.com/gallery/image/107548/chemistry_magic_tube_science_test.png",
  iconAll: "http://icongal.com/gallery/image/107548/chemistry_magic_tube_science_test.png",
  scope: {
    semantic: {
      "hCard":"hCard",
      "hCalendar":"hCalendar",
      "geo":"geo",
      "adr":"adr",
      "tag":"tag",
      "xFolk":"xFolk",
      "RDF":"RDF"
    }
  },
  getURL:function(obj) {
    var s = JSON.stringify(obj);
    if(s.length>100 || !(s.startsWith('[')||s.startsWith('{')))
      s = "#"+window.btoa(unescape(encodeURIComponent(s)));
    return show_json.baseURL + s;
  },
  isArray:function(obj) {
    if(!Array.isArray(obj)) return false;
    if(obj.length>0) return true;
    for(var p in obj)
      return false;
    return true;
  },
  flatArray:function(obj) {
    var res=[];
    for(var i=0;i<obj.length;i++)
      if(!obj[i].duplicate)
        res.push(show_json.flatObject(obj[i]));
    return res;
  },
  isString:function(obj) {
    if(typeof obj == "string") return true;
    if(typeof obj != "object") return false;
    for(var p in obj)
      if(p!="valueOf"&&p!="toHTML"&&p!="toString")
        return false;
    return true;
  },
  flatString:function(obj) {
    if(typeof obj == "string") return obj;
    if(obj.toHTML) return obj.toHTML()
    if(obj.valueOf) return obj.valueOf()
    return obj.toString()
  },
  flatObject:function(obj) {
    if(show_json.isArray(obj))
      return show_json.flatArray(obj);
    if(show_json.isString(obj))
      return show_json.flatString(obj);
    if(typeof obj != "object")
      return obj;
    var res={};
    for(var p in obj)
      if(p!="node"&&p!="resolvedNode"&&typeof obj[p]!="undefined")
        res[p] = show_json.flatObject(obj[p]);
    return res;
  },
  prepareActionObject: function(semanticObject, semanticObjectType) {
    return {
        semanticAction:"object",
        sourceUrl:content.document.location.href,
        sourceTitle:content.document.title,
        semanticObject:show_json.flatObject(semanticObject),
        semanticObjectType:semanticObjectType
      };
  },
  prepareActionArray: function(semanticArrays, semanticObjectType) {
    return {
        semanticAction:"array",
        sourceUrl:content.document.location.href,
        sourceTitle:content.document.title,
        semanticArrays:show_json.flatObject(semanticArrays),
        semanticObjectType:semanticObjectType
      };
  },
  doAction: function(semanticObject, semanticObjectType) {
    show_json.lastObject = semanticObject;
    return show_json.getURL(show_json.prepareActionObject(semanticObject, semanticObjectType));
  },
  doActionAll: function(semanticArrays, semanticObjectType) {
    show_json.lastArray = semanticArrays;
    return show_json.getURL(show_json.prepareActionArray(semanticArrays, semanticObjectType));
  }
};

var plain_json = {
  //baseURL:"http://jsbin.com/ligusi/#",
  baseURL:"data:text/html;base64,PCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PG1ldGEgY2hhcnNldD11dGYtOD48dGl0bGU+SlNPTiB2aWV3ZXI8L3RpdGxlPjxzdHlsZSB0eXBlPXRleHQvY3NzPi5lcnJvcntjb2xvcjpyZWR9cHJle291dGxpbmU6MXB4IHNvbGlkICNjY2M7cGFkZGluZzo1cHg7bWFyZ2luOjVweH0uc3RyaW5ne2NvbG9yOmdyZWVufS5udW1iZXJ7Y29sb3I6ZGFya29yYW5nZX0uYm9vbGVhbntjb2xvcjpibHVlfS5udWxse2NvbG9yOm1hZ2VudGF9LmtleXtjb2xvcjpyZWR9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PHNjcmlwdD5mdW5jdGlvbiBqc29uU3ludGF4SGlnaGxpZ2h0KGEpe2E9YS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7Iik7cmV0dXJuIGEucmVwbGFjZSgvKCIoXFx1W2EtekEtWjAtOV17NH18XFxbXnVdfFteXFwiXSkqIihccyo6KT98XGIodHJ1ZXxmYWxzZXxudWxsKVxifC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPykvZyxmdW5jdGlvbihjKXt2YXIgYj0ibnVtYmVyIjtpZigvXiIvLnRlc3QoYykpe2lmKC86JC8udGVzdChjKSl7Yj0ia2V5In1lbHNle2I9InN0cmluZyJ9fWVsc2V7aWYoL3RydWV8ZmFsc2UvLnRlc3QoYykpe2I9ImJvb2xlYW4ifWVsc2V7aWYoL251bGwvLnRlc3QoYykpe2I9Im51bGwifX19cmV0dXJuJzxzcGFuIGNsYXNzPSInK2IrJyI+JytjKyI8L3NwYW4+In0pfXZhciBzdHIsb2JqLGVycjtmdW5jdGlvbiBwYXJzZV9hcmdfc3RyKGEpe2Vycj11bmRlZmluZWQ7b2JqPXVuZGVmaW5lZDt0cnl7aWYoYS5zdGFydHNXaXRoKCIjIikpe2E9ZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZSh3aW5kb3cuYXRvYihhLnN1YnN0cigxKSkpKX1pZihhLnN0YXJ0c1dpdGgoIlsiKXx8YS5zdGFydHNXaXRoKCJ7Iikpe3N0cj1hO29iaj1KU09OLnBhcnNlKHN0cik7cmV0dXJuIHRydWV9ZXJyPSJVbmtub3duIHN0cmluZyBzdGFydDogIithLnN1YnN0cigwLDIwKTtyZXR1cm4gZmFsc2V9Y2F0Y2goYil7ZXJyPWJ9fWZ1bmN0aW9uIHNob3dfc3RyKGIpe2lmKHR5cGVvZiBvYmo9PSJ1bmRlZmluZWQiKXtkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwiPHA+IitiKyIgPSAiK3N0cisiPC9wPiIpfWVsc2V7dmFyIGE9anNvblN5bnRheEhpZ2hsaWdodChKU09OLnN0cmluZ2lmeShvYmosdW5kZWZpbmVkLDQpKTtkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwiPHA+IitiKyI6PHByZT5cbiIrYSsiPC9wcmU+PC9wPiIpfX1mdW5jdGlvbiBzaG93X2Vycigpe2lmKHR5cGVvZiBlcnI9PSJ1bmRlZmluZWQiKXtyZXR1cm59ZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsJzxwIGNsYXNzPSJlcnJvciI+JytlcnIrIjwvcD4iKX1mdW5jdGlvbiBwYXJzZV9zZWFyY2goKXtpZihkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpe2lmKHBhcnNlX2FyZ19zdHIoZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5zdWJ"+
                                "zdHIoMSkpKSl7c2hvd19zdHIoInNlYXJjaCIpfXNob3dfZXJyKCl9fWZ1bmN0aW9uIHBhcnNlX2hhc2goKXtpZihkb2N1bWVudC5sb2NhdGlvbi5oYXNoKXtpZihwYXJzZV9hcmdfc3RyKGRvY3VtZW50LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpKSl7c2hvd19zdHIoImhhc2giKX1zaG93X2VycigpfX1mdW5jdGlvbiBvbl9oYXNoX2NoYW5nZSgpe2lmKGRvY3VtZW50LmxvY2F0aW9uLmhhc2gpe3BhcnNlX2hhc2goKX1lbHNle3BhcnNlX3NlYXJjaCgpfX1wYXJzZV9zZWFyY2goKTtwYXJzZV9oYXNoKCk7d2luZG93Lm9uaGFzaGNoYW5nZT1vbl9oYXNoX2NoYW5nZTs8L3NjcmlwdD48L2JvZHk+PC9odG1sPgo=#",
  description: "Show plain JSON",
  descriptionAll: "Show plain JSON",
  shortDescription: "Show plain JSON",
  shortDescriptionAll: "Show plain JSON",
  icon: "http://icongal.com/gallery/image/107548/chemistry_magic_tube_science_test.png",
  iconAll: "http://icongal.com/gallery/image/107548/chemistry_magic_tube_science_test.png",
  scope: show_json.scope,
  getURL:function(obj) {
    var s = JSON.stringify(obj);
    if(s.length>100 || !(s.startsWith('[')||s.startsWith('{')))
      s = "#"+window.btoa(unescape(encodeURIComponent(s)));
    return plain_json.baseURL + s;
  },
  doAction: function(semanticObject, semanticObjectType) {
    plain_json.lastObject = semanticObject;
    return plain_json.getURL(show_json.prepareActionObject(semanticObject, semanticObjectType));
  },
  doActionAll: function(semanticArrays, semanticObjectType) {
    plain_json.lastArray = semanticArrays;
    return plain_json.getURL(show_json.prepareActionArray(semanticArrays, semanticObjectType));
  }
};

SemanticActions.add("show_json", show_json);
SemanticActions.add("plain_json", plain_json);
